<div class="register-container">
  <div class="register-card-wrapper">
    <mat-card class="register-card">
      <mat-card-header>
        <div mat-card-avatar class="register-avatar">
          <mat-icon>person_add</mat-icon>
        </div>
        <mat-card-title>用户注册</mat-card-title>
        <mat-card-subtitle>创建您的航空订单管理账号</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
          <!-- 用户名输入 -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>用户名</mat-label>
            <input 
              matInput 
              formControlName="username" 
              placeholder="请输入用户名"
              autocomplete="username">
            <mat-icon matSuffix>person</mat-icon>
            <mat-error *ngIf="hasFieldError('username')">
              {{ getFieldError('username') }}
            </mat-error>
            <mat-hint>用户名长度3-20位，只能包含字母、数字和下划线</mat-hint>
          </mat-form-field>

          <!-- 密码输入 -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>密码</mat-label>
            <input 
              matInput 
              [type]="hidePassword ? 'password' : 'text'"
              formControlName="password" 
              placeholder="请输入密码"
              autocomplete="new-password">
            <button 
              mat-icon-button 
              matSuffix 
              type="button"
              (click)="hidePassword = !hidePassword"
              [attr.aria-label]="'隐藏密码'"
              [attr.aria-pressed]="hidePassword">
              <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
            <mat-error *ngIf="hasFieldError('password')">
              {{ getFieldError('password') }}
            </mat-error>
            <mat-hint>密码长度6-20位</mat-hint>
          </mat-form-field>

          <!-- 确认密码输入 -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>确认密码</mat-label>
            <input 
              matInput 
              [type]="hideConfirmPassword ? 'password' : 'text'"
              formControlName="confirmPassword" 
              placeholder="请再次输入密码"
              autocomplete="new-password">
            <button 
              mat-icon-button 
              matSuffix 
              type="button"
              (click)="hideConfirmPassword = !hideConfirmPassword"
              [attr.aria-label]="'隐藏确认密码'"
              [attr.aria-pressed]="hideConfirmPassword">
              <mat-icon>{{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
            <mat-error *ngIf="hasFieldError('confirmPassword')">
              {{ getFieldError('confirmPassword') }}
            </mat-error>
          </mat-form-field>

          <!-- 用户角色选择 -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>用户角色</mat-label>
            <mat-select formControlName="role">
              <mat-option value="USER">普通用户</mat-option>
              <mat-option value="ADMIN">管理员</mat-option>
            </mat-select>
            <mat-icon matSuffix>admin_panel_settings</mat-icon>
            <mat-error *ngIf="hasFieldError('role')">
              {{ getFieldError('role') }}
            </mat-error>
            <mat-hint>选择您的账号类型</mat-hint>
          </mat-form-field>

          <!-- 注册按钮 -->
          <div class="register-actions">
            <button 
              mat-raised-button 
              color="primary" 
              type="submit"
              class="register-button"
              [disabled]="loading || !registerForm.valid">
              <mat-spinner 
                *ngIf="loading" 
                diameter="20" 
                class="button-spinner">
              </mat-spinner>
              <mat-icon *ngIf="!loading">person_add</mat-icon>
              {{ loading ? '注册中...' : '注册账号' }}
            </button>
          </div>
        </form>
      </mat-card-content>

      <mat-card-actions class="card-actions">
        <div class="login-link">
          <span>已有账号？</span>
          <button 
            mat-button 
            color="primary" 
            (click)="navigateToLogin()"
            class="link-button">
            立即登录
          </button>
        </div>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
